---
title: Đồng bộ hóa các hợp đồng dự án và dự án trực tiếp từ Project Service Automation sang Finance
description: Chủ đề này mô tả mẫu và nhiệm vụ cơ bản dùng để đồng bộ hóa trực tiếp các hợp đồng dự án và dự án trực tiếp từ Microsoft Dynamics 365 Project Service Automation sang Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 12/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 1a470fd86ceccd7b6058da6972399a6d6be2a991
ms.sourcegitcommit: 2b74edd31f38410024a01124c9202a4d94464d04
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 12/17/2020
ms.locfileid: "4764845"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance"></a><span data-ttu-id="04896-103">Đồng bộ hóa các hợp đồng dự án và dự án trực tiếp từ Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-103">Synchronize project contracts and projects directly from Project Service Automation to Finance</span></span> 

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="04896-104">Chủ đề này mô tả mẫu và nhiệm vụ cơ bản dùng để đồng bộ hóa trực tiếp các hợp đồng dự án và dự án trực tiếp từ Dynamics 365 Project Service Automation sang Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="04896-105">Nếu đang sử dụng Enterprise Edition 7.3.0, bạn phải cài đặt KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="04896-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="04896-106">Luồng dữ liệu cho Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="04896-107">Trước khi có thể sử dụng giải pháp tích hợp Project Service Automation sang Finance, bạn nên làm quen với tính năng tích hợp Dynamics 365 Data.</span><span class="sxs-lookup"><span data-stu-id="04896-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="04896-108">Giải pháp tích hợp Project Service Automation sang Finance sử dụng tính năng Tích hợp dữ liệu để đồng bộ hóa dữ liệu giữa các phiên bản của Project Service Automation và Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="04896-109">Mẫu tích hợp có sẵn với tính năng Tích hợp dữ liệu cho phép dòng dữ liệu về hợp đồng dự án, dự án, mô tả hợp đồng dự án và các mốc thời gian mô tả hợp đồng dự án từ Project Service Automation sang Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="04896-110">Hình minh họa sau đây cho thấy cách dữ liệu được đồng bộ hóa giữa Project Service Automation và Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="04896-111">[![Luồng dữ liệu cho phần tích hợp Project Service Automation với Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="04896-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="04896-112">Mẫu và nhiệm vụ</span><span class="sxs-lookup"><span data-stu-id="04896-112">Templates and tasks</span></span>

<span data-ttu-id="04896-113">Để truy cập các mẫu có sẵn, trong trung tâm quản trị Microsoft Power Apps, chọn **Dự án** và sau đó, ở góc trên bên phải, chọn **Dự án mới** để chọn các mẫu công khai.</span><span class="sxs-lookup"><span data-stu-id="04896-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="04896-114">Các mẫu sau và các nhiệm vụ cơ bản được sử dụng để đồng bộ hóa giá trị thực tế trong hợp đồng dự án và dự án từ Project Service Automation sang Finance:</span><span class="sxs-lookup"><span data-stu-id="04896-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="04896-115">Tích hợp với Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="04896-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="04896-116">**Tên của mẫu trong Tích hợp dữ liệu:** Dự án và hợp đồng (Project Service Automation sang Finance)</span><span class="sxs-lookup"><span data-stu-id="04896-116">**Name of the template in Data integration:** Projects and contracts (Project Service Automation to Finance)</span></span>
- <span data-ttu-id="04896-117">**Tên của nhiệm vụ trong dự án:**</span><span class="sxs-lookup"><span data-stu-id="04896-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="04896-118">Hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-118">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-119">Dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-119">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-120">Mô tả hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-120">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-121">Các mốc thời gian mô tả hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-121">Project contract line milestones Project Service Automation to Finance</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="04896-122">Tích hợp với Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="04896-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="04896-123">Có một sự thay đổi về lược đồ trong Project Service Automation ảnh hưởng đến mẫu mốc thời gian mô tả hợp đồng dự án và cần sử dụng phiên bản v2 của mẫu để tích hợp Project Service Automation v3.x với Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="04896-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="04896-124">**Tên của mẫu trong Tích hợp dữ liệu:** Dự án và Hợp đồng (Project Service Automation 3.x sang Finance) - v2</span><span class="sxs-lookup"><span data-stu-id="04896-124">**Name of the template in Data integration:** Projects and Contracts (Project Service Automation 3.x to Finance) - v2</span></span>
- <span data-ttu-id="04896-125">**Tên của nhiệm vụ trong dự án:**</span><span class="sxs-lookup"><span data-stu-id="04896-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="04896-126">Hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-126">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-127">Dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-127">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-128">Mô tả hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-128">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="04896-129">Các mốc thời gian mô tả hợp đồng dự án Project Service Automation sang Finance</span><span class="sxs-lookup"><span data-stu-id="04896-129">Project contract line milestones Project Service Automation to Finance</span></span>

<span data-ttu-id="04896-130">Trước khi quá trình đồng bộ hóa hợp đồng dự án và dự án có thể xảy ra, bạn phải đồng bộ hóa các tài khoản.</span><span class="sxs-lookup"><span data-stu-id="04896-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="04896-131">Bộ thực thể</span><span class="sxs-lookup"><span data-stu-id="04896-131">Entity set</span></span>

| <span data-ttu-id="04896-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="04896-132">Project Service Automation</span></span>       | <span data-ttu-id="04896-133">Tài chính</span><span class="sxs-lookup"><span data-stu-id="04896-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="04896-134">Đơn hàng</span><span class="sxs-lookup"><span data-stu-id="04896-134">Orders</span></span>                           | <span data-ttu-id="04896-135">Thực thể tích hợp cho hợp đồng dự án</span><span class="sxs-lookup"><span data-stu-id="04896-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="04896-136">Dự án</span><span class="sxs-lookup"><span data-stu-id="04896-136">Projects</span></span>                         | <span data-ttu-id="04896-137">Thực thể tích hợp cho dự án</span><span class="sxs-lookup"><span data-stu-id="04896-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="04896-138">Dòng mô tả Đơn hàng</span><span class="sxs-lookup"><span data-stu-id="04896-138">Order lines</span></span>                      | <span data-ttu-id="04896-139">Thực thể tích hợp cho mô tả hợp đồng dự án</span><span class="sxs-lookup"><span data-stu-id="04896-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="04896-140">Mốc thời gian mô tả hợp đồng dự án</span><span class="sxs-lookup"><span data-stu-id="04896-140">Project contract line milestones</span></span> | <span data-ttu-id="04896-141">Thực thể tích hợp cho mốc thời gian mô tả hợp đồng dự án</span><span class="sxs-lookup"><span data-stu-id="04896-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="04896-142">Luồng thực thể</span><span class="sxs-lookup"><span data-stu-id="04896-142">Entity flow</span></span>

<span data-ttu-id="04896-143">Hợp đồng dự án được quản lý trong Project Service Automation và được đồng bộ hóa với Finance dưới dạng hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="04896-144">Là một phần của mẫu tích hợp, bạn có thể thiết lập nguồn tích hợp trong Finance cho hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="04896-145">Dự án thời gian và vật liệu và dự án giá cố định được quản lý trong Project Service Automation và được đồng bộ hóa sang Finance dưới dạng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-145">Time and material and fixed-price projects are managed in Project Service Automation and synchronized to Finance as projects.</span></span> <span data-ttu-id="04896-146">Là một phần của tích hợp mẫu, bạn có thể thiết lập nguồn tích hợp trong Finance cho dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-146">As part of the template integration, you can set the integration source for the project in Finance.</span></span> <span data-ttu-id="04896-147">Hiện tại, chỉ hỗ trợ dự án thời gian và vật liệu và dự án giá cố định.</span><span class="sxs-lookup"><span data-stu-id="04896-147">Currently, only time and material and fixed-price projects are supported.</span></span>


<span data-ttu-id="04896-148">Mô tả hợp đồng dự án được quản lý trong Project Service Automation và được đồng bộ hóa với Finance dưới dạng quy tắc thanh toán hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-148">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="04896-149">Nếu phương thức thanh toán khác với loại dự án mặc định, việc đồng bộ hóa sẽ cập nhật loại dự án cho dự án mô tả hợp đồng và nhóm dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-149">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="04896-150">Mốc thời gian mô tả hợp đồng dự án được quản lý trong Project Service Automation và được đồng bộ hóa với Finance dưới dạng mốc thời gian quy tắc thanh toán hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-150">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="04896-151">Giải pháp tích hợp Project Service Automation với Finance</span><span class="sxs-lookup"><span data-stu-id="04896-151">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="04896-152">Trường **ID hợp đồng dự án** có sẵn trên trang **Hợp đồng dự án**.</span><span class="sxs-lookup"><span data-stu-id="04896-152">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="04896-153">Trường này đã được tạo thành một chìa khóa tự nhiên và duy nhất để hỗ trợ quá trình tích hợp.</span><span class="sxs-lookup"><span data-stu-id="04896-153">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="04896-154">Khi hợp đồng dự án mới được tạo, nếu giá trị **ID hợp đồng dự án** chưa tồn tại, nó sẽ được tạo tự động bằng cách sử dụng một chuỗi số.</span><span class="sxs-lookup"><span data-stu-id="04896-154">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="04896-155">Giá trị bao gồm **ORD**, theo sau là một dãy số tăng dần và sau đó là một hậu tố gồm sáu ký tự.</span><span class="sxs-lookup"><span data-stu-id="04896-155">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="04896-156">Đây là một ví dụ: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="04896-156">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="04896-157">Trường **Số dự án** có sẵn trên trang **Dự án**.</span><span class="sxs-lookup"><span data-stu-id="04896-157">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="04896-158">Trường này đã được tạo thành một chìa khóa tự nhiên và duy nhất để hỗ trợ quá trình tích hợp.</span><span class="sxs-lookup"><span data-stu-id="04896-158">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="04896-159">Khi dự án mới được tạo, nếu giá trị **Số dự án** chưa tồn tại, nó sẽ được tạo tự động bằng cách sử dụng một chuỗi số.</span><span class="sxs-lookup"><span data-stu-id="04896-159">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="04896-160">Giá trị bao gồm **PRJ**, theo sau là một dãy số tăng dần và sau đó là một hậu tố gồm sáu ký tự.</span><span class="sxs-lookup"><span data-stu-id="04896-160">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="04896-161">Đây là một ví dụ: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="04896-161">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="04896-162">Khi áp dụng giải pháp tích hợp Project Service Automation với Finance, tập lệnh nâng cấp sẽ đặt trường **ID hợp đồng dự án** cho các hợp đồng dự án hiện có và trường **Số dự án** cho các dự án hiện có trong Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="04896-162">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="04896-163">Điều kiện tiên quyết và thiết lập ánh xạ</span><span class="sxs-lookup"><span data-stu-id="04896-163">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="04896-164">Trước khi quá trình đồng bộ hóa hợp đồng dự án và dự án có thể xảy ra, bạn phải đồng bộ hóa các tài khoản.</span><span class="sxs-lookup"><span data-stu-id="04896-164">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="04896-165">Trong bộ kết nối của bạn, hãy thêm ánh xạ trường khóa tích hợp cho **msdyn\_organizationalunits** đến **msdyn\_name \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="04896-165">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="04896-166">Trước tiên, bạn có thể cần thêm một dự án vào bộ kết nối.</span><span class="sxs-lookup"><span data-stu-id="04896-166">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="04896-167">Để biết thêm thông tin, hãy xem [Tích hợp dữ liệu vào Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="04896-167">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="04896-168">Trong bộ kết nối của bạn, hãy thêm ánh xạ trường khóa tích hợp cho **msdyn\_projects** đến **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="04896-168">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="04896-169">Trước tiên, bạn có thể cần thêm một dự án vào bộ kết nối.</span><span class="sxs-lookup"><span data-stu-id="04896-169">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="04896-170">Để biết thêm thông tin, hãy xem [Tích hợp dữ liệu vào Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="04896-170">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="04896-171">**SourceDataID** cho các hợp đồng dự án và dự án có thể được cập nhật thành một giá trị khác hoặc loại bỏ khỏi ánh xạ.</span><span class="sxs-lookup"><span data-stu-id="04896-171">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="04896-172">Giá trị mẫu mặc định là **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="04896-172">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="04896-173">Ánh xạ **PaymentTerms** phải được cập nhật để phản ánh các điều khoản thanh toán hợp lệ trong Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-173">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="04896-174">Bạn cũng có thể loại bỏ ánh xạ khỏi nhiệm vụ dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-174">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="04896-175">Ánh xạ giá trị mặc định có các giá trị mặc định cho dữ liệu demo.</span><span class="sxs-lookup"><span data-stu-id="04896-175">The default value map has default values for demo data.</span></span> <span data-ttu-id="04896-176">Bảng sau đây cho thấy các giá trị trong Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="04896-176">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="04896-177">Giá trị</span><span class="sxs-lookup"><span data-stu-id="04896-177">Value</span></span> | <span data-ttu-id="04896-178">Mô tả</span><span class="sxs-lookup"><span data-stu-id="04896-178">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="04896-179">1</span><span class="sxs-lookup"><span data-stu-id="04896-179">1</span></span>     | <span data-ttu-id="04896-180">Tổng 30</span><span class="sxs-lookup"><span data-stu-id="04896-180">Net 30</span></span>        |
    | <span data-ttu-id="04896-181">2</span><span class="sxs-lookup"><span data-stu-id="04896-181">2</span></span>     | <span data-ttu-id="04896-182">2% 10, Tổng 30</span><span class="sxs-lookup"><span data-stu-id="04896-182">2% 10, Net 30</span></span> |
    | <span data-ttu-id="04896-183">3</span><span class="sxs-lookup"><span data-stu-id="04896-183">3</span></span>     | <span data-ttu-id="04896-184">Tổng 45</span><span class="sxs-lookup"><span data-stu-id="04896-184">Net 45</span></span>        |
    | <span data-ttu-id="04896-185">Tệp 4</span><span class="sxs-lookup"><span data-stu-id="04896-185">4</span></span>     | <span data-ttu-id="04896-186">Tổng 60</span><span class="sxs-lookup"><span data-stu-id="04896-186">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="04896-187">Power Query</span><span class="sxs-lookup"><span data-stu-id="04896-187">Power Query</span></span>

<span data-ttu-id="04896-188">Sử dụng Microsoft Power Query dành cho Excel để lọc dữ liệu nếu các điều kiện sau được đáp ứng:</span><span class="sxs-lookup"><span data-stu-id="04896-188">Use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="04896-189">Bạn có đơn đặt hàng trong Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="04896-189">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="04896-190">Bạn có nhiều đơn vị tổ chức trong Project Service Automation và các đơn vị tổ chức này sẽ được ánh xạ tới nhiều pháp nhân trong Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-190">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="04896-191">Nếu bạn phải sử dụng Power Query, hãy làm theo các nguyên tắc sau:</span><span class="sxs-lookup"><span data-stu-id="04896-191">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="04896-192">Mẫu Dự án và hợp đồng (PSA sang Fin và Ops) có bộ lọc mặc định chỉ bao gồm đơn đặt hàng thuộc loại **Mục công việc (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="04896-192">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="04896-193">Bộ lọc này giúp đảm bảo rằng hợp đồng dự án không được tạo cho đơn đặt hàng trong Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-193">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="04896-194">Nếu bạn tạo mẫu của riêng mình, bạn phải thêm bộ lọc này.</span><span class="sxs-lookup"><span data-stu-id="04896-194">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="04896-195">Tạo bộ lọc Power Query chỉ bao gồm các tổ chức hợp đồng sẽ được đồng bộ hóa với pháp nhân của bộ kết nối tích hợp.</span><span class="sxs-lookup"><span data-stu-id="04896-195">Create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="04896-196">Ví dụ: các hợp đồng dự án mà bạn có với đơn vị tổ chức hợp đồng của Contoso US phải được đồng bộ hóa với pháp nhân USSI, nhưng các hợp đồng dự án mà bạn có với đơn vị tổ chức hợp đồng của Contoso Global phải được đồng bộ hóa với pháp nhân USMF.</span><span class="sxs-lookup"><span data-stu-id="04896-196">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="04896-197">Nếu bạn không thêm bộ lọc này vào ánh xạ nhiệm vụ của mình, tất cả các hợp đồng dự án sẽ được đồng bộ hóa với pháp nhân được xác định cho bộ kết nối, bất kể đơn vị tổ chức hợp đồng là gì.</span><span class="sxs-lookup"><span data-stu-id="04896-197">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="04896-198">Ánh xạ mẫu trong tích hợp dữ liệu</span><span class="sxs-lookup"><span data-stu-id="04896-198">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="04896-199">Các trường **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** không được bao gồm trong ánh xạ mặc định cho hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-199">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="04896-200">Bạn có thể thêm các ánh xạ nếu bạn yêu cầu dữ liệu này được đồng bộ hóa cho các hợp đồng dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-200">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="04896-201">Các trường **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** và **ProjectType** không được bao gồm trong ánh xạ mặc định cho dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-201">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="04896-202">Bạn có thể thêm các ánh xạ nếu bạn yêu cầu dữ liệu này được đồng bộ hóa cho các dự án.</span><span class="sxs-lookup"><span data-stu-id="04896-202">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="04896-203">Các hình sau đây minh họa các ví dụ về việc ánh xạ nhiệm vụ mẫu trong Tích hợp dữ liệu.</span><span class="sxs-lookup"><span data-stu-id="04896-203">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="04896-204">Tùy chọn ánh xạ hiển thị thông tin trường sẽ được đồng bộ hóa từ Project Service Automation sang Finance.</span><span class="sxs-lookup"><span data-stu-id="04896-204">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="04896-205">[![Ánh xạ mẫu hợp đồng dự án](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="04896-205">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="04896-206">[![Ánh xạ mẫu dự án](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="04896-206">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="04896-207">[![Ánh xạ mẫu mô tả hợp đồng dự án](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="04896-207">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="04896-208">[![Ánh xạ mẫu mốc thời gian mô tả hợp đồng dự án](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="04896-208">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="04896-209">Ánh xạ mốc thời gian mô tả hợp đồng dự án trong Dự án và Hợp đồng (PSA 3.x sang Dynamics) - mẫu v2:</span><span class="sxs-lookup"><span data-stu-id="04896-209">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="04896-210">[![Ánh xạ mốc thời gian mô tả hợp đồng dự án với phiên bản 2 mẫu](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="04896-210">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
